CREATE TABLE IF NOT EXISTS Category (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  previewImage TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS Product (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  isNew INTEGER DEFAULT 0, -- Using 0/1 for booleans
  price REAL NOT NULL,
  previewImage TEXT NOT NULL,
  features TEXT NOT NULL,
  description TEXT NOT NULL,
  inTheBox TEXT NOT NULL, -- JSON string that holds box contents with item and quantity
  images TEXT NOT NULL, -- JSON object storing smallImages array and largeImage string
  categoryId INTEGER,
  FOREIGN KEY (categoryId) REFERENCES Category(id) ON DELETE CASCADE
);


CREATE TABLE IF NOT EXISTS User (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  username TEXT UNIQUE NOT NULL,
  email TEXT UNIQUE NOT NULL,
  passwordHash TEXT NOT NULL,
  createdAt TEXT DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS Admin (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  userId INTEGER,
  FOREIGN KEY (userId) REFERENCES User(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS Session (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  userId INTEGER,
  token TEXT NOT NULL,
  createdAt TEXT DEFAULT CURRENT_TIMESTAMP,
  expiresAt TEXT NOT NULL,
  FOREIGN KEY (userId) REFERENCES User(id) ON DELETE CASCADE
);
